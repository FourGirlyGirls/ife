mod
===

mod is a simple caching and compressing static file handler for node.js.

	npm install mod

The module exports three important methods: file, dir, and inter.

Serving an individual file
--------------------------

This method is useful while learning the ins & outs of client-side JS or CSS as, by default, nothing is cached.
No funny business is involved here.

Here is an example on top of the Express framework

```javascript
var express = require('express'),
    app = express.createServer(),
    mod = require('mod')

app.get('/', function(req, res) { mod.file('index.html').serve(req, res) })

app.listen(8080)
````

In future examples we will assume that an Express server has been created, and "app" refers to the return value of "createServer()."

Serving a directory
-------------------

The "dir" method simply namespaces a directory.
Maybe you want to keep your HTMLs separate from your CSSes.

```javascript
var pages = mod.dir('pages')
var scripts = mod.dir(['js/somn', 'js/somnelse'])
app.get('/', function(req, res) { pages.serve('index.html', req, res) })
app.get('/js/:somn/:somnelse', function(req, res) {
scripts[req.params.somn].serve(req.params.somnelse, req, res)
})
````

Here you see that you can throw an array of directories at it, same difference.

As an Express middleware
------------------------

Express middleware functions are called on every route, and if a particular path concerns it, it will handle business automatically. If not, it simply passes control to the following route.
This is much simpler, but more limiting, as the paths must match client and server side. We can probably make it less restricting though, stay tuned.

```javascript
app.use(mod.inter('files'))
````

Options
-------

Accepted is a second parameter, an object which contains options, of which there are so far three.
You can also set options using the .set() method, which is chainable, and accepts either a key-value, or an object containing options.

```javascript
var pages = mod.dir('pages', {'compress':false,'cache':true})
var somnElse = mod.dir(['js/1','js/2'], {'compress':false})
pages.set('compress', true)
somnElse['js/1'].set('cache':true).set({'redis':true,'compress':false})

app.use(mod.inter('files',{'redis':true}))
````

### compress

Your file will be served using either deflate or gzip compression.
If neither is available to the requester, it will fall back to serving the file as-is.
By default this option is enabled, and I don't think there's a great reason to disable it.

### cache

By default, caching is disabled.
This makes sense while in-production, but in the wild, should you use this module, you will want to enable caching.
It uses a plain old javascript object to cache files unless a second option (redis) is enabled. More about that later.

### redis

With redis enabled, the file handler will store its cache of files in Redis.
You must first npm install redis (and preferably hiredis as well), and this way you could perhaps manage assets across multiple processes.

